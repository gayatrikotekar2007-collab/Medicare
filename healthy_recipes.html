<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare - Healthy Recipes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        header {
            background: linear-gradient(135deg, #2c7da0 0%, #01497c 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
            color: white;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 2rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav li {
            margin: 0 15px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary {
            background-color: #468faf;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2a6f97;
        }
        
        .btn-secondary {
            background-color: transparent;
            border: 1px solid white;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .btn-danger {
            background-color: #e63946;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c1121f;
        }
        
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 30px;
            color: #01497c;
        }
        
        .page-title h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .page-title p {
            font-size: 1.2rem;
            color: #468faf;
        }
        
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid #a9d6e5;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active, .filter-btn:hover {
            background: #2c7da0;
            color: white;
            border-color: #2c7da0;
        }
        
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .resource-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
        }
        
        .resource-image {
            height: 180px;
            background-color: #e6f2ff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #468faf;
            font-size: 3.5rem;
        }
        
        .resource-content {
            padding: 20px;
        }
        
        .resource-content h3 {
            color: #01497c;
            margin-bottom: 12px;
            font-size: 1.4rem;
        }
        
        .resource-content p {
            color: #468faf;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .recipe-info {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .info-item {
            background: #e6f2ff;
            padding: 8px 12px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .info-item i {
            color: #2c7da0;
        }
        
        footer {
            background: #01497c;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 40px auto;
            border-radius: 10px;
            max-width: 800px;
            width: 90%;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from {opacity: 0; transform: translateY(-30px);}
            to {opacity: 1; transform: translateY(0);}
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #e6f2ff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            color: #01497c;
            margin: 0;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #468faf;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .recipe-hero {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .recipe-image {
            flex: 1;
            min-width: 250px;
            height: 200px;
            background-color: #e6f2ff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #468faf;
            font-size: 4rem;
            border-radius: 8px;
        }
        
        .recipe-meta {
            flex: 2;
            min-width: 250px;
        }
        
        .recipe-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .detail-card {
            background: #e6f2ff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .detail-card i {
            font-size: 1.5rem;
            color: #2c7da0;
            margin-bottom: 10px;
        }
        
        .detail-card h4 {
            margin: 5px 0;
            color: #01497c;
        }
        
        .detail-card p {
            color: #468faf;
            margin: 0;
        }
        
        .ingredients-section, .instructions-section {
            margin-bottom: 25px;
        }
        
        .section-title {
            color: #01497c;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid #a9d6e5;
        }
        
        .ingredients-list, .instructions-list {
            padding-left: 20px;
        }
        
        .ingredients-list li, .instructions-list li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            padding: 15px 20px;
            border-top: 1px solid #e6f2ff;
        }
        
        .read-aloud-btn {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin: 15px 0;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            nav li {
                margin: 5px;
            }
            
            .auth-buttons {
                margin-top: 15px;
            }
            
            .page-title h1 {
                font-size: 2rem;
            }
            
            .page-title p {
                font-size: 1rem;
            }
            
            .resource-grid {
                grid-template-columns: 1fr;
            }
            
            .recipe-info {
                gap: 10px;
            }
            
            .recipe-hero {
                flex-direction: column;
            }
            
            .recipe-image {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="{{ url_for('index') }}" class="logo">
                <i class="fas fa-heartbeat"></i>
                <span>MediCare</span>
            </a>
            <nav>
                <ul>
                    <li><a href="{{ url_for('index') }}">Home</a></li>
                    {% if 'user_id' in session %}
                    <li><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
                    <li><a href="{{ url_for('symptoms') }}">Symptoms Check</a></li>
                    <li><a href="{{ url_for('remedies') }}">Home Remedies</a></li>
                    <li><a href="{{ url_for('doctors') }}">Doctors</a></li>
                    <li><a href="{{ url_for('facilities') }}">Facilities</a></li>
                    <li><a href="{{ url_for('health_tracking') }}">Health Tracking</a></li>
                    <li><a href="{{ url_for('health_guides') }}">Guides</a></li>
                    <li><a href="{{ url_for('healthy_recipes') }}" class="active">Recipes</a></li>
                    <li><a href="{{ url_for('exercise_videos') }}">Videos</a></li>
                    {% endif %}
                </ul>
            </nav>
            <div class="auth-buttons">
                {% if 'user_id' in session %}
                <span>Welcome, {{ session.username }}</span>
                <a href="{{ url_for('logout') }}" class="btn btn-danger">Logout</a>
                {% else %}
                <a href="{{ url_for('login') }}" class="btn btn-primary">Login</a>
                <a href="{{ url_for('register') }}" class="btn btn-secondary">Register</a>
                {% endif %}
            </div>
        </div>
    </header>

    <div class="container">
        <div class="page-title">
            <h1>Healthy Recipes</h1>
            <p>Delicious and nutritious recipes to support your health goals</p>
        </div>
        
        <div class="filter-bar">
            <button class="filter-btn active" data-filter="all">All Recipes</button>
            <button class="filter-btn" data-filter="breakfast">Breakfast</button>
            <button class="filter-btn" data-filter="lunch">Lunch</button>
            <button class="filter-btn" data-filter="dinner">Dinner</button>
            <button class="filter-btn" data-filter="snack">Snacks</button>
            <button class="filter-btn" data-filter="low-sodium">Low Sodium</button>
        </div>
        
        <div class="resource-grid">
            <div class="resource-card" data-category="breakfast low-sodium">
                <div class="resource-image">
                    <i class="fas fa-egg"></i>
                </div>
                <div class="resource-content">
                    <h3>Mediterranean Omelette</h3>
                    <p>Protein-packed omelette with spinach, tomatoes, and feta cheese. Perfect for a heart-healthy breakfast.</p>
                    <div class="recipe-info">
                        <div class="info-item">
                            <i class="fas fa-clock"></i> 15 mins
                        </div>
                        <div class="info-item">
                            <i class="fas fa-fire"></i> 280 cal
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i> 2 servings
                        </div>
                    </div>
                    <button class="btn btn-primary view-recipe" data-recipe="mediterranean-omelette">View Recipe</button>
                </div>
            </div>
            
            <div class="resource-card" data-category="lunch">
                <div class="resource-image">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="resource-content">
                    <h3>Quinoa Salad Bowl</h3>
                    <p>Nutrient-dense salad with quinoa, roasted vegetables, avocado, and lemon-tahini dressing.</p>
                    <div class="recipe-info">
                        <div class="info-item">
                            <i class="fas fa-clock"></i> 25 mins
                        </div>
                        <div class="info-item">
                            <i class="fas fa-fire"></i> 420 cal
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i> 2 servings
                        </div>
                    </div>
                    <button class="btn btn-primary view-recipe" data-recipe="quinoa-salad">View Recipe</button>
                </div>
            </div>
            
            <div class="resource-card" data-category="dinner low-sodium">
                <div class="resource-image">
                    <i class="fas fa-fish"></i>
                </div>
                <div class="resource-content">
                    <h3>Baked Salmon with Veggies</h3>
                    <p>Omega-3 rich salmon fillet baked with seasonal vegetables and herbs. A perfect heart-healthy dinner.</p>
                    <div class="recipe-info">
                        <div class="info-item">
                            <i class="fas fa-clock"></i> 30 mins
                        </div>
                        <div class="info-item">
                            <i class="fas fa-fire"></i> 380 cal
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i> 2 servings
                        </div>
                    </div>
                    <button class="btn btn-primary view-recipe" data-recipe="baked-salmon">View Recipe</button>
                </div>
            </div>
            
            <div class="resource-card" data-category="snack">
                <div class="resource-image">
                    <i class="fas fa-seedling"></i>
                </div>
                <div class="resource-content">
                    <h3>Energy Bites</h3>
                    <p>No-bake snacks with oats, nuts, seeds, and dried fruits. Perfect for a healthy energy boost.</p>
                    <div class="recipe-info">
                        <div class="info-item">
                            <i class="fas fa-clock"></i> 15 mins
                        </div>
                        <div class="info-item">
                            <i class="fas fa-fire"></i> 90 cal each
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i> 12 servings
                        </div>
                    </div>
                    <button class="btn btn-primary view-recipe" data-recipe="energy-bites">View Recipe</button>
                </div>
            </div>
            
            <div class="resource-card" data-category="breakfast">
                <div class="resource-image">
                    <i class="fas fa-blender"></i>
                </div>
                <div class="resource-content">
                    <h3>Green Power Smoothie</h3>
                    <p>Nutrient-packed smoothie with spinach, banana, Greek yogurt, and protein powder.</p>
                    <div class="recipe-info">
                        <div class="info-item">
                            <i class="fas fa-clock"></i> 5 mins
                        </div>
                        <div class="info-item">
                            <i class="fas fa-fire"></i> 220 cal
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i> 1 serving
                        </div>
                    </div>
                    <button class="btn btn-primary view-recipe" data-recipe="green-smoothie">View Recipe</button>
                </div>
            </div>
            
            <div class="resource-card" data-category="dinner">
                <div class="resource-image">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="resource-content">
                    <h3>Vegetable Stir Fry</h3>
                    <p>Quick and colorful stir fry with mixed vegetables, tofu, and low-sodium soy sauce.</p>
                    <div class="recipe-info">
                        <div class="info-item">
                            <i class="fas fa-clock"></i> 20 mins
                        </div>
                        <div class="info-item">
                            <i class="fas fa-fire"></i> 320 cal
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i> 2 servings
                        </div>
                    </div>
                    <button class="btn btn-primary view-recipe" data-recipe="vegetable-stir-fry">View Recipe</button>
                </div>
            </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div class="modal" id="recipeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalRecipeTitle">Recipe Name</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="recipe-hero">
                    <div class="recipe-image" id="modalRecipeImage">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="recipe-meta">
                        <div class="recipe-details">
                            <div class="detail-card">
                                <i class="fas fa-clock"></i>
                                <h4>Prep Time</h4>
                                <p id="prepTime">10 mins</p>
                            </div>
                            <div class="detail-card">
                                <i class="fas fa-hourglass-half"></i>
                                <h4>Cook Time</h4>
                                <p id="cookTime">20 mins</p>
                            </div>
                            <div class="detail-card">
                                <i class="fas fa-users"></i>
                                <h4>Servings</h4>
                                <p id="servings">2 people</p>
                            </div>
                            <div class="detail-card">
                                <i class="fas fa-fire"></i>
                                <h4>Calories</h4>
                                <p id="calories">320 cal</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="ingredients-section">
                    <h3 class="section-title">Ingredients</h3>
                    <ul class="ingredients-list" id="ingredientsList">
                        <!-- Ingredients will be added dynamically -->
                    </ul>
                </div>
                
                <div class="instructions-section">
                    <h3 class="section-title">Instructions</h3>
                    <ol class="instructions-list" id="instructionsList">
                        <!-- Instructions will be added dynamically -->
                    </ol>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary read-aloud-btn" id="readAloudBtn">
                    <i class="fas fa-volume-up"></i> Read Aloud
                </button>
                <button class="btn btn-secondary" id="closeModalBtn">Close</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2023 MediCare Healthcare System. All rights reserved.</p>
    </footer>

    <script>
        // Recipe data
        const recipes = {
            "mediterranean-omelette": {
                title: "Mediterranean Omelette",
                icon: "fas fa-egg",
                prepTime: "5 mins",
                cookTime: "10 mins",
                servings: "2",
                calories: "280 cal",
                ingredients: [
                    "4 large eggs",
                    "1/4 cup milk or water",
                    "1 cup fresh spinach, chopped",
                    "1/2 cup cherry tomatoes, halved",
                    "1/4 cup feta cheese, crumbled",
                    "2 tbsp red onion, finely diced",
                    "1 tbsp olive oil",
                    "Salt and pepper to taste",
                    "Fresh herbs (optional)"
                ],
                instructions: [
                    "In a bowl, whisk together eggs, milk, salt, and pepper until well combined.",
                    "Heat olive oil in a non-stick skillet over medium heat.",
                    "Add red onion and sauté for 1-2 minutes until softened.",
                    "Add spinach and cook until wilted, about 1 minute.",
                    "Pour the egg mixture into the skillet, tilting to distribute evenly.",
                    "Cook for 2-3 minutes until the edges begin to set.",
                    "Sprinkle tomatoes and feta cheese over one half of the omelette.",
                    "Carefully fold the other half over the filling and cook for another 1-2 minutes.",
                    "Slide onto a plate, garnish with fresh herbs if desired, and serve immediately."
                ]
            },
            "quinoa-salad": {
                title: "Quinoa Salad Bowl",
                icon: "fas fa-leaf",
                prepTime: "15 mins",
                cookTime: "15 mins",
                servings: "2",
                calories: "420 cal",
                ingredients: [
                    "1 cup quinoa, rinsed",
                    "2 cups water or vegetable broth",
                    "1 cup cherry tomatoes, halved",
                    "1 cucumber, diced",
                    "1 avocado, sliced",
                    "1/4 cup red onion, finely diced",
                    "2 tbsp fresh parsley, chopped",
                    "2 tbsp lemon juice",
                    "1 tbsp olive oil",
                    "1 tsp honey or maple syrup",
                    "Salt and pepper to taste"
                ],
                instructions: [
                    "Cook quinoa according to package instructions using water or broth. Let cool.",
                    "In a large bowl, combine cooled quinoa with tomatoes, cucumber, red onion, and parsley.",
                    "In a small bowl, whisk together lemon juice, olive oil, honey, salt, and pepper.",
                    "Pour dressing over the salad and toss to combine.",
                    "Gently fold in avocado slices just before serving.",
                    "Adjust seasoning if needed and serve at room temperature or chilled."
                ]
            },
            "baked-salmon": {
                title: "Baked Salmon with Veggies",
                icon: "fas fa-fish",
                prepTime: "10 mins",
                cookTime: "20 mins",
                servings: "2",
                calories: "380 cal",
                ingredients: [
                    "2 salmon fillets (6 oz each)",
                    "1 cup broccoli florets",
                    "1 bell pepper, sliced",
                    "1 zucchini, sliced",
                    "1 tbsp olive oil",
                    "1 lemon, sliced",
                    "2 cloves garlic, minced",
                    "1 tsp dried herbs (thyme, dill, or oregano)",
                    "Salt and pepper to taste"
                ],
                instructions: [
                    "Preheat oven to 400°F (200°C).",
                    "Place salmon fillets in the center of a baking sheet lined with parchment paper.",
                    "Arrange vegetables around the salmon on the baking sheet.",
                    "Drizzle olive oil over salmon and vegetables.",
                    "Season with minced garlic, herbs, salt, and pepper.",
                    "Place lemon slices on top of the salmon fillets.",
                    "Bake for 15-20 minutes until salmon is cooked through and flakes easily.",
                    "Serve immediately with additional lemon wedges if desired."
                ]
            },
            "energy-bites": {
                title: "Energy Bites",
                icon: "fas fa-seedling",
                prepTime: "15 mins",
                cookTime: "0 mins",
                servings: "12 bites",
                calories: "90 cal each",
                ingredients: [
                    "1 cup old-fashioned oats",
                    "1/2 cup almond butter or peanut butter",
                    "1/3 cup honey or maple syrup",
                    "1/4 cup ground flaxseed",
                    "1/4 cup chia seeds",
                    "1/4 cup mini chocolate chips (optional)",
                    "1 tsp vanilla extract",
                    "Pinch of salt"
                ],
                instructions: [
                    "In a medium bowl, mix together all ingredients until well combined.",
                    "Cover and refrigerate for at least 30 minutes to firm up.",
                    "Once chilled, roll the mixture into 1-inch balls.",
                    "Store in an airtight container in the refrigerator for up to 2 weeks.",
                    "Enjoy as a quick snack or pre-workout energy boost!"
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('recipeModal');
            const closeModalBtn = document.getElementById('closeModal');
            const closeModalBtn2 = document.getElementById('closeModalBtn');
            const viewRecipeButtons = document.querySelectorAll('.view-recipe');
            const readAloudBtn = document.getElementById('readAloudBtn');
            
            let speechSynthesis = window.speechSynthesis;
            let isReading = false;
            let currentUtterance = null;

            // Filter functionality
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.getAttribute('data-filter');
                    
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    // Filter resources
                    const resources = document.querySelectorAll('.resource-card');
                    
                    resources.forEach(resource => {
                        if (filter === 'all') {
                            resource.style.display = 'block';
                        } else {
                            const categories = resource.getAttribute('data-category').split(' ');
                            if (categories.includes(filter)) {
                                resource.style.display = 'block';
                            } else {
                                resource.style.display = 'none';
                            }
                        }
                    });
                });
            });
            
            // Open modal when view recipe button is clicked
            viewRecipeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const recipeId = button.getAttribute('data-recipe');
                    openRecipeModal(recipeId);
                });
            });
            
            // Close modal when close button is clicked
            closeModalBtn.addEventListener('click', closeModal);
            closeModalBtn2.addEventListener('click', closeModal);
            
            // Close modal when clicking outside the modal content
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });
            
            // Read aloud functionality
            readAloudBtn.addEventListener('click', toggleReadAloud);
            
            function openRecipeModal(recipeId) {
                // Stop any ongoing speech
                if (isReading) {
                    stopReading();
                }
                
                const recipe = recipes[recipeId];
                if (!recipe) return;
                
                // Update modal content
                document.getElementById('modalRecipeTitle').textContent = recipe.title;
                document.getElementById('modalRecipeImage').innerHTML = `<i class="${recipe.icon}"></i>`;
                document.getElementById('prepTime').textContent = recipe.prepTime;
                document.getElementById('cookTime').textContent = recipe.cookTime;
                document.getElementById('servings').textContent = recipe.servings;
                document.getElementById('calories').textContent = recipe.calories;
                
                // Populate ingredients list
                const ingredientsList = document.getElementById('ingredientsList');
                ingredientsList.innerHTML = '';
                recipe.ingredients.forEach(ingredient => {
                    const li = document.createElement('li');
                    li.textContent = ingredient;
                    ingredientsList.appendChild(li);
                });
                
                // Populate instructions list
                const instructionsList = document.getElementById('instructionsList');
                instructionsList.innerHTML = '';
                recipe.instructions.forEach(instruction => {
                    const li = document.createElement('li');
                    li.textContent = instruction;
                    instructionsList.appendChild(li);
                });
                
                // Show modal
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden'; // Prevent scrolling
            }
            
            function closeModal() {
                // Stop any ongoing speech
                if (isReading) {
                    stopReading();
                }
                
                modal.style.display = 'none';
                document.body.style.overflow = 'auto'; // Re-enable scrolling
            }
            
            function toggleReadAloud() {
                if (isReading) {
                    stopReading();
                } else {
                    startReading();
                }
            }
            
            function startReading() {
                if (speechSynthesis.speaking) {
                    speechSynthesis.cancel();
                }
                
                // Get all text content from modal
                const title = document.getElementById('modalRecipeTitle').textContent;
                const prepTime = document.getElementById('prepTime').textContent;
                const cookTime = document.getElementById('cookTime').textContent;
                const servings = document.getElementById('servings').textContent;
                const calories = document.getElementById('calories').textContent;
                
                const ingredients = Array.from(document.getElementById('ingredientsList').children)
                    .map(li => li.textContent).join('. ');
                
                const instructions = Array.from(document.getElementById('instructionsList').children)
                    .map(li => li.textContent).join('. Next, ');
                
                // Create the full text to be read
                const fullText = `
                    Recipe: ${title}. 
                    Preparation time: ${prepTime}. 
                    Cook time: ${cookTime}. 
                    Servings: ${servings}. 
                    Calories: ${calories}. 
                    Ingredients: ${ingredients}. 
                    Instructions: ${instructions}.
                `;
                
                // Create and configure speech utterance
                currentUtterance = new SpeechSynthesisUtterance(fullText);
                currentUtterance.rate = 0.9;
                currentUtterance.pitch = 1;
                currentUtterance.volume = 1;
                
                // Update button state
                isReading = true;
                readAloudBtn.innerHTML = '<i class="fas fa-volume-mute"></i> Stop Reading';
                readAloudBtn.classList.add('btn-danger');
                readAloudBtn.classList.remove('btn-primary');
                
                // Speak the text
                speechSynthesis.speak(currentUtterance);
                
                // Reset button when finished
                currentUtterance.onend = function() {
                    stopReading();
                };
            }
            
            function stopReading() {
                if (speechSynthesis.speaking) {
                    speechSynthesis.cancel();
                }
                
                isReading = false;
                readAloudBtn.innerHTML = '<i class="fas fa-volume-up"></i> Read Aloud';
                readAloudBtn.classList.remove('btn-danger');
                readAloudBtn.classList.add('btn-primary');
            }
        });
    </script>
</body>
</html>